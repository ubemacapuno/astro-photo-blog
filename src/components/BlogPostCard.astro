---
import { Icon } from "astro-icon/components";
import { formatDateShort } from "../consts";
import type { Post } from "../types";

interface Props {
  post: Post;
}

const { post } = Astro.props as Props;
const tagLabel = post.frontmatter.type === "dev" ? "dev" : "photography";
---

<a
  href={post.url}
  data-astro-prefetch
  class="blog-card-link group block text-inherit font-normal"
>
  <article
    class="flex flex-col overflow-hidden rounded-xl border border-gray-200 bg-white p-3 transition-[border-color] duration-200 group-hover:border-gray-400 dark:border-[#333] dark:bg-[#1a1a1a] dark:group-hover:border-[#555]"
  >
    <div
      class="aspect-16/10 overflow-hidden rounded-t-xl bg-gray-200 dark:bg-[#282828]"
    >
      <img
        src={post.frontmatter.image.url}
        alt={post.frontmatter.image.alt}
        class="h-full w-full object-cover"
        loading="lazy"
        decoding="async"
      />
    </div>
    <div class="flex flex-col gap-2 mt-2">
      <p class="text-[0.8125rem] text-gray-500 dark:text-gray-400">
        {post.frontmatter.author}
      </p>
      <h2
        class="m-0 flex items-start justify-between gap-2 text-lg font-bold leading-tight text-gray-900 dark:text-white"
      >
        <span class="min-w-0 flex-1">{post.frontmatter.title}</span>
        <span
          class="shrink-0 text-gray-700 opacity-90 dark:text-white"
          aria-hidden="true"
        >
          <Icon name="mdi:arrow-top-right" size={20} />
        </span>
      </h2>
      <p
        class="m-0 line-clamp-2 text-sm leading-snug text-gray-600 dark:text-gray-400"
      >
        {post.frontmatter.description}
      </p>
      <footer class="mt-1 flex items-center justify-between gap-3">
        <span
          class="inline-block rounded-full bg-gray-200 px-2.5 py-1 text-[0.8125rem] font-medium text-gray-800 dark:bg-[#282828] dark:text-white"
        >
          {tagLabel}
        </span>
        <time
          class="text-[0.8125rem] text-gray-500 dark:text-gray-400"
          datetime={post.frontmatter.pub_date.toISOString()}
        >
          {formatDateShort(post.frontmatter.pub_date)}
        </time>
      </footer>
    </div>
  </article>
</a>
